import{ba as M,d as S,x,b3 as U,b as V,F as T,an as L,f as O,u as t,c as g,k as s,a as H,l as y,a1 as J,o as f,q as r,bb as Y,p as N,v as a,N as _,bc as Q,D as P,bd as X,ac as z,be as k,ae as h,bf as C,b7 as E,b9 as $}from"./index-HS7BEnlJ.js";import{u as j}from"./usePageTitle--i4XSTNx.js";class q extends M{parse(l){return JSON.parse(decodeURIComponent(l??""))}format(l){return encodeURIComponent(JSON.stringify(l))}}const G=_("span",null,"Enhanced deployment parameters UI improves support for lists, default values, validation, and more. Enable by updating your prefect config.",-1),K=_("span",null,"To disable the enhanced deployment parameters UI by default update your prefect config.",-1),ee=S({__name:"FlowRunCreate",setup(D){const l=x(),F=U(),m=V("deploymentId"),d=J(),w=T("parameters",q,void 0),{deployment:c}=L(m),v=T("useEnhancedDeploymentParameters",z,!1),I=async u=>{var p,n;try{const e=await l.deployments.createDeploymentFlowRun(m.value,u),o=((n=(p=u.state)==null?void 0:p.stateDetails)==null?void 0:n.scheduledTime)??void 0,i=!o,R=C(k,{flowRun:e,flowRunRoute:h.flowRun,router:d,immediate:i,startTime:o});E(R,"success"),d.push(h.deployment(m.value))}catch(e){E("Something went wrong trying to create a flow run","error"),console.error(e)}},A=async u=>{var p,n;try{const e=await l.deployments.createDeploymentFlowRunV2(m.value,u),o=((n=(p=u.state)==null?void 0:p.stateDetails)==null?void 0:n.scheduledTime)??void 0,i=!o,R=C(k,{flowRun:e,flowRunRoute:h.flowRun,router:d,immediate:i,startTime:o});E(R,"success"),d.push(h.deployment(m.value))}catch(e){const o=$(e,"Something went wrong trying to create a flow run");E(o,"error"),console.error(e)}},b=()=>{d.back()},B=O(()=>c.value?`Create Flow Run for Deployment: ${c.value.name}`:"Create Flow Run for Deployment");return j(B),(u,p)=>{const n=y("p-link"),e=y("p-message"),o=y("p-code"),i=y("p-layout-default");return t(c)?(f(),g(i,{key:0},{header:s(()=>[r(t(Y),{deployment:t(c)},null,8,["deployment"])]),default:s(()=>[t(F).access.schemasV2&&!t(v)?(f(),N(P,{key:0},[r(e,{info:""},{default:s(()=>[a(" The enhanced deployment parameters UI improves support for lists, default values, validation, and more. "),_("strong",null,[a("If you're having trouble, please "),r(n,{href:"https://github.com/PrefectHQ/prefect/issues/new/choose"},{default:s(()=>[a("report an issue.")]),_:1})]),_("span",null,[a(" To revert to the previous deployment parameters UI click "),r(n,{href:"?useEnhancedDeploymentParameters=true",target:"_self"},{default:s(()=>[a("here")]),_:1}),a(".")])]),_:1}),r(t(Q),{deployment:t(c),parameters:t(w),onSubmit:A,onCancel:b},null,8,["deployment","parameters"])],64)):(f(),N(P,{key:1},[t(v)?(f(),g(e,{key:1},{default:s(()=>[_("span",null,[a("To use the enhanced deployment parameters UI click "),r(n,{href:"?useEnhancedDeploymentParameters=false",target:"_self"},{default:s(()=>[a("here")]),_:1}),a(". ")]),K,r(o,{class:"mt-2"},{default:s(()=>[a(" prefect config PREFECT_EXPERIMENTAL_ENABLE_ENHANCED_DEPLOYMENT_PARAMETERS=False ")]),_:1})]),_:1})):(f(),g(e,{key:0},{default:s(()=>[G,r(o,{class:"mt-2"},{default:s(()=>[a(" prefect config PREFECT_EXPERIMENTAL_ENABLE_ENHANCED_DEPLOYMENT_PARAMETERS=True ")]),_:1})]),_:1})),r(t(X),{deployment:t(c),parameters:t(w),onSubmit:I,onCancel:b},null,8,["deployment","parameters"])],64))]),_:1})):H("",!0)}}});export{ee as default};
